---
learning_level: "Nerd â†’ Novice"
prerequisites:
  - "docs/sessions/L2/07_S6.md"
estimated_time: "30 minutes"
session_type: "Knowledge"
learning_objectives:
  - "Understand file handling basics in Python"
  - "Open, read, and close text files"
  - "Write and append text to files"
  - "Use context managers (with statement) for safe file handling"
  - "Handle file-related errors gracefully"
  - "Work with file paths and understand file modes"
related_topics:
  prerequisites:
    - "docs/sessions/L2/07_S6.md"
    - "docs/sessions/L2/04_S4.md"
  builds_upon:
    - "docs/sessions/L2/04_S4.md"
    - "docs/sessions/L2/03_S3.md"
  enables:
    - "docs/sessions/L2/09_S8.md"
    - "docs/sessions/L2/10_MP2.md"
  cross_refs: []
---

# Session 7: File Handling: Reading & Writing Text Files

**Duration:** 30 minutes  
**Type:** ğŸ“š Knowledge  
**Level:** Nerd â†’ Novice

---

## ğŸ¯ **Session Overview & Agenda**

### **What You'll Learn:**

- âœ… Understand why file handling is essential for real programs
- âœ… Open, read, and close text files properly
- âœ… Write and append text to files
- âœ… Use context managers (`with` statement) for safe file handling
- âœ… Handle file-related errors gracefully
- âœ… Work with file paths and understand file modes

### **Session Flow:**

| Part | Activity                        | Description                                                                                |
| ---- | ------------------------------- | ------------------------------------------------------------------------------------------ |
| 1    | Why File Handling?              | Real-world need for persistent data                                                        |
| 2    | Reading Text Files              | Opening and reading file contents                                                          |
| 3    | Writing Text Files              | Creating and writing to files                                                              |
| 4    | Context Managers                | The `with` statement for safe file handling                                                |
| 5    | File Modes & Paths              | Understanding r, w, a modes and file paths                                                 |
| 6    | Error Handling for Files        | Gracefully handling file errors                                                            |
| 7    | Hands-on Practice               | Practice files demonstrating file operations                                               |

---

## ğŸ“‹ **Before You Begin**

### **Prerequisites:**

âœ… Completed [Session 6: Functions: Scope & Code Organization](docs/sessions/L2/07_S6.md)  
âœ… Completed [Session 4: Error Handling](docs/sessions/L2/04_S4.md)  
âœ… Understand functions and error handling with try/except  
âœ… Comfortable with strings and string methods

---

## ğŸ“ **Part 1: Why File Handling?**

### **The Problem: Data Disappears!**

Everything we've done so far vanishes when the program ends:

```python
# This data is lost when the program stops!
user_name = input("What's your name? ")
high_score = 1000
todo_list = ["Learn Python", "Build projects"]

# Program ends... everything is gone!
```

### **The Solution: Files = Persistent Storage**

Files let us **save data permanently** and **load it later**:

```python
# Save data to a file
with open("user_data.txt", "w") as file:
    file.write("Alice\n")
    file.write("1000\n")

# Later... even after restarting the program
with open("user_data.txt", "r") as file:
    name = file.readline().strip()
    score = file.readline().strip()
    print(f"Welcome back, {name}! Your score: {score}")
```

### **Real-World Uses:**

| Use Case | Example |
|----------|---------|
| **Save Settings** | User preferences, configuration |
| **Store Data** | High scores, todo lists, notes |
| **Log Information** | Error logs, activity logs |
| **Process Data** | Read CSV files, export reports |
| **Configuration** | API keys, database settings |

---

## ğŸ“– **Part 2: Reading Text Files**

### **The Basic Pattern: open() â†’ read() â†’ close()**

```python
# Step 1: Open the file
file = open("example.txt", "r")  # "r" = read mode

# Step 2: Read the contents
content = file.read()
print(content)

# Step 3: Close the file (IMPORTANT!)
file.close()
```

> âš ï¸ **Always close files!** Open files consume system resources and may cause data loss.

### **Different Ways to Read Files**

#### **1. Read Entire File: `read()`**

```python
file = open("poem.txt", "r")
content = file.read()  # Gets everything as one string
print(content)
file.close()
```

#### **2. Read Line by Line: `readline()`**

```python
file = open("poem.txt", "r")
line1 = file.readline()  # First line
line2 = file.readline()  # Second line
print(line1)
print(line2)
file.close()
```

#### **3. Read All Lines into List: `readlines()`**

```python
file = open("poem.txt", "r")
lines = file.readlines()  # List of all lines
print(lines)  # ['Line 1\n', 'Line 2\n', 'Line 3\n']
file.close()
```

#### **4. Iterate Line by Line (Memory Efficient)**

```python
file = open("large_file.txt", "r")
for line in file:
    print(line.strip())  # .strip() removes \n
file.close()
```

### **Quick Reference:**

| Method | Returns | Best For |
|--------|---------|----------|
| `read()` | Entire file as string | Small files |
| `readline()` | One line at a time | Processing line by line |
| `readlines()` | List of all lines | When you need a list |
| `for line in file` | Iterate lines | Large files (memory efficient) |

---

## âœï¸ **Part 3: Writing Text Files**

### **Writing New Content: Write Mode ("w")**

```python
# Create a new file (or overwrite existing)
file = open("output.txt", "w")
file.write("Hello, World!\n")
file.write("This is line 2.\n")
file.close()
```

> âš ï¸ **Warning:** Write mode `"w"` **erases existing content**! Use carefully.

### **Adding to Existing Content: Append Mode ("a")**

```python
# Add to existing file (doesn't erase)
file = open("log.txt", "a")
file.write("New entry added!\n")
file.close()
```

### **Writing Multiple Lines**

```python
# Method 1: Multiple write() calls
file = open("names.txt", "w")
file.write("Alice\n")
file.write("Bob\n")
file.write("Charlie\n")
file.close()

# Method 2: writelines() with a list
names = ["Alice\n", "Bob\n", "Charlie\n"]
file = open("names.txt", "w")
file.writelines(names)
file.close()
```

### **Write vs Append:**

| Mode | Symbol | Behavior |
|------|--------|----------|
| **Write** | `"w"` | Creates new file or **erases existing** |
| **Append** | `"a"` | Creates new file or **adds to existing** |

---

## ğŸ›¡ï¸ **Part 4: Context Managers (The `with` Statement)**

### **The Problem with Manual close()**

What if an error occurs before `close()`?

```python
file = open("data.txt", "r")
content = file.read()
# If an error happens here, file never closes!
result = int(content)  # What if content isn't a number?
file.close()  # This line might never run!
```

### **The Solution: `with` Statement**

The `with` statement **automatically closes the file**, even if errors occur:

```python
# Python automatically closes the file when the block ends
with open("data.txt", "r") as file:
    content = file.read()
    print(content)
# File is automatically closed here!
```

### **Why `with` is Better:**

| Manual Approach | Context Manager (`with`) |
|-----------------|--------------------------|
| Must remember to close | Automatic closing |
| Errors can prevent closing | Always closes, even with errors |
| More code | Cleaner, shorter code |
| Error-prone | Safe and reliable |

### **Best Practice: Always Use `with`**

```python
# âœ… GOOD: Using context manager
with open("file.txt", "r") as file:
    content = file.read()

# âŒ AVOID: Manual open/close
file = open("file.txt", "r")
content = file.read()
file.close()
```

### **Multiple Files with `with`**

```python
# Open two files at once
with open("input.txt", "r") as infile, open("output.txt", "w") as outfile:
    content = infile.read()
    outfile.write(content.upper())
```

---

## ğŸ—‚ï¸ **Part 5: File Modes & Paths**

### **File Modes Reference**

| Mode | Description | Creates File? | Erases Content? |
|------|-------------|---------------|-----------------|
| `"r"` | Read only | No (error if missing) | No |
| `"w"` | Write only | Yes | **Yes** |
| `"a"` | Append only | Yes | No |
| `"r+"` | Read and write | No | No |
| `"w+"` | Write and read | Yes | **Yes** |
| `"a+"` | Append and read | Yes | No |

### **File Paths**

#### **Same Folder (Relative Path)**

```python
# File in same folder as your script
with open("data.txt", "r") as file:
    content = file.read()
```

#### **Subfolder**

```python
# File in a subfolder
with open("data/scores.txt", "r") as file:
    content = file.read()
```

#### **Absolute Path**

```python
# Full path (Windows)
with open(r"C:\Users\Name\Documents\file.txt", "r") as file:
    content = file.read()

# Full path (Mac/Linux)
with open("/home/user/documents/file.txt", "r") as file:
    content = file.read()
```

> ğŸ’¡ **Tip:** Use `r"..."` (raw string) on Windows to handle backslashes.

### **Checking if File Exists**

```python
import os

filename = "data.txt"

if os.path.exists(filename):
    print(f"{filename} exists!")
    with open(filename, "r") as file:
        print(file.read())
else:
    print(f"{filename} not found!")
```

---

## ğŸ›¡ï¸ **Part 6: Error Handling for Files**

### **Common File Errors**

| Error | Cause |
|-------|-------|
| `FileNotFoundError` | File doesn't exist (read mode) |
| `PermissionError` | No permission to access file |
| `IsADirectoryError` | Path is a folder, not a file |

### **Handling File Errors with try/except**

```python
def read_file_safely(filename):
    """Read a file with error handling."""
    try:
        with open(filename, "r") as file:
            return file.read()
    except FileNotFoundError:
        print(f"âŒ Error: '{filename}' not found!")
        return None
    except PermissionError:
        print(f"âŒ Error: No permission to read '{filename}'!")
        return None
    except Exception as e:
        print(f"âŒ Unexpected error: {e}")
        return None

# Usage
content = read_file_safely("myfile.txt")
if content:
    print(content)
```

### **Creating a File if It Doesn't Exist**

```python
import os

def ensure_file_exists(filename, default_content=""):
    """Create a file if it doesn't exist."""
    if not os.path.exists(filename):
        with open(filename, "w") as file:
            file.write(default_content)
        print(f"Created new file: {filename}")
    return filename

# Usage
ensure_file_exists("settings.txt", "volume=50\nbrightness=80\n")
```

---

## ğŸ”„ **Part 7: Practical Examples**

### **Example 1: Simple Note Saver**

```python
def save_note(filename, note):
    """Save a note to a file."""
    with open(filename, "a") as file:
        file.write(note + "\n")
    print("âœ… Note saved!")

def read_notes(filename):
    """Read all notes from a file."""
    try:
        with open(filename, "r") as file:
            return file.readlines()
    except FileNotFoundError:
        return []

# Usage
save_note("notes.txt", "Remember to buy milk")
save_note("notes.txt", "Call mom at 5pm")

notes = read_notes("notes.txt")
for i, note in enumerate(notes, 1):
    print(f"{i}. {note.strip()}")
```

### **Example 2: High Score Tracker**

```python
def load_high_score(filename):
    """Load high score from file."""
    try:
        with open(filename, "r") as file:
            return int(file.read().strip())
    except (FileNotFoundError, ValueError):
        return 0

def save_high_score(filename, score):
    """Save high score to file."""
    with open(filename, "w") as file:
        file.write(str(score))

# Usage
high_score = load_high_score("highscore.txt")
print(f"Current high score: {high_score}")

new_score = 1500
if new_score > high_score:
    save_high_score("highscore.txt", new_score)
    print(f"ğŸ‰ New high score: {new_score}!")
```

### **Example 3: Log File Writer**

```python
from datetime import datetime

def log_message(filename, message):
    """Add a timestamped message to log file."""
    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    with open(filename, "a") as file:
        file.write(f"[{timestamp}] {message}\n")

# Usage
log_message("app.log", "Application started")
log_message("app.log", "User logged in")
log_message("app.log", "Data processed successfully")
```

---

## âœ… **Progress Check: File Handling**

Before moving to the next section, ensure you can:

- [ ] Open and read text files using `open()` and `read()`
- [ ] Write and append to text files using write mode `"w"` and append mode `"a"`
- [ ] Use the `with` statement for safe file handling
- [ ] Explain the difference between read, write, and append modes
- [ ] Handle file errors with try/except
- [ ] Understand relative and absolute file paths

---

## ğŸ§ª **Practice Files**

### **Practice File 1: `01_reading_files.py`**

Create and read text files with different methods.

**Location:** `src/L2/S7/01_reading_files.py`

### **Practice File 2: `02_writing_files.py`**

Write and append to files, understanding the difference.

**Location:** `src/L2/S7/02_writing_files.py`

### **Practice File 3: `03_file_operations.py`**

Complete file operations with error handling.

**Location:** `src/L2/S7/03_file_operations.py`

---

## ğŸ¯ **Key Takeaways**

### **Essential Concepts:**

1. **Files = Persistent Storage** - Save data that survives program restarts
2. **Always use `with`** - Context managers ensure files are closed safely
3. **Know Your Modes** - `"r"` read, `"w"` write (erases!), `"a"` append
4. **Handle Errors** - Files can be missing or inaccessible
5. **Strip newlines** - Use `.strip()` when reading lines

### **Common Patterns:**

```python
# Reading a file
with open("file.txt", "r") as file:
    content = file.read()

# Writing to a file
with open("file.txt", "w") as file:
    file.write("content")

# Appending to a file
with open("file.txt", "a") as file:
    file.write("more content\n")

# Reading line by line
with open("file.txt", "r") as file:
    for line in file:
        print(line.strip())
```

---

## ğŸ”— **What's Next?**

In the next session, you'll learn:

- [Session 8: Modules Deep Dive & Code Organization](docs/sessions/L2/09_S8.md) - Organize code into reusable modules
- [Mini Project 2: Text File Application](docs/sessions/L2/10_MP2.md) - Apply file handling in a real project

---

## ğŸ“š **Additional Resources**

- ğŸ **Python Docs - File I/O:** [Reading and Writing Files](https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files)
- ğŸ“– **Real Python:** [Working With Files in Python](https://realpython.com/working-with-files-in-python/)

---

âœ¨ **Great job!** You now know how to read, write, and manage files in Python - an essential skill for building real applications! ğŸğŸ“
