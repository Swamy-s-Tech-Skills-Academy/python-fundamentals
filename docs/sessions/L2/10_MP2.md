# Mini Project 2: Text File Application

> üéØ **Goal**: Build a complete contact manager application that reads from and writes to text files, uses well-organized functions, and demonstrates everything learned in Level 2.

---

## üìã Project Overview

| Attribute        | Detail                                            |
| ---------------- | ------------------------------------------------- |
| **Level**        | L2: Nerd ‚Üí Novice                                 |
| **Type**         | Mini Project 2 (Final Project)                    |
| **Duration**     | 30‚Äì45 min                                         |
| **Prerequisites**| L2 Sessions 1-8 (all Phase A and B)               |
| **Deliverable**  | `src/L2/MP2/contact_manager.py`                   |

---

## üéØ Learning Objectives Demonstrated

This project brings together ALL Level 2 concepts:

| Session | Concept | How It's Used |
|---------|---------|---------------|
| S1 | Sets & Tuples | Store unique tags, contact data as tuples |
| S2 | List Comprehensions | Filter and transform contacts |
| S3-S6 | Functions | Organize code into reusable functions |
| S4 | Error Handling | Handle file and input errors gracefully |
| S7 | File I/O | Read/write contacts to text file |
| S8 | Code Organization | Well-structured, documented code |

---

## üèóÔ∏è Project Requirements

### Core Features (Must Have)

1. **üìÇ Load Contacts** - Read contacts from a text file
2. **üíæ Save Contacts** - Write contacts to a text file
3. **‚ûï Add Contact** - Add new contacts with validation
4. **üìã List Contacts** - Display all contacts
5. **üîç Search Contacts** - Find contacts by name or phone
6. **üóëÔ∏è Delete Contact** - Remove a contact

### Data Structure

Each contact should have:
- **Name** (required)
- **Phone** (required)
- **Email** (optional)
- **Tags** (optional) - e.g., "work", "family", "friend"

### File Format

Use a simple text format:
```
name|phone|email|tag1,tag2,tag3
John Doe|555-1234|john@email.com|work,friend
Jane Smith|555-5678||family
```

---

## üìù Step-by-Step Guide

### Step 1: Plan Your Functions (5 min)

Before coding, plan what functions you need:

```
Functions needed:
‚îú‚îÄ‚îÄ File Operations
‚îÇ   ‚îú‚îÄ‚îÄ load_contacts(filename) ‚Üí list of contacts
‚îÇ   ‚îî‚îÄ‚îÄ save_contacts(filename, contacts)
‚îÇ
‚îú‚îÄ‚îÄ Contact Management
‚îÇ   ‚îú‚îÄ‚îÄ add_contact(contacts) ‚Üí updated contacts
‚îÇ   ‚îú‚îÄ‚îÄ delete_contact(contacts, name) ‚Üí updated contacts
‚îÇ   ‚îî‚îÄ‚îÄ search_contacts(contacts, query) ‚Üí matching contacts
‚îÇ
‚îú‚îÄ‚îÄ Display Functions
‚îÇ   ‚îú‚îÄ‚îÄ display_contact(contact)
‚îÇ   ‚îú‚îÄ‚îÄ display_all_contacts(contacts)
‚îÇ   ‚îî‚îÄ‚îÄ show_menu()
‚îÇ
‚îî‚îÄ‚îÄ Main Program
    ‚îî‚îÄ‚îÄ main()
```

### Step 2: Set Up the File Structure (2 min)

Start with the basic structure:

```python
# contact_manager.py
"""
Contact Manager - Level 2 Mini Project 2

A simple contact management application demonstrating
file handling, functions, and error handling.
"""

# Constants
CONTACTS_FILE = "contacts.txt"
SEPARATOR = "|"


def main():
    """Main entry point of the contact manager."""
    print("Welcome to Contact Manager!")
    # TODO: Implement main loop


if __name__ == "__main__":
    main()
```

### Step 3: Implement File Operations (8 min)

#### Loading Contacts

```python
def load_contacts(filename):
    """
    Load contacts from a text file.
    
    Args:
        filename: Path to the contacts file
        
    Returns:
        List of contact dictionaries
    """
    contacts = []
    
    try:
        with open(filename, "r") as file:
            for line in file:
                line = line.strip()
                if not line:  # Skip empty lines
                    continue
                    
                # Parse: name|phone|email|tags
                parts = line.split(SEPARATOR)
                if len(parts) >= 2:
                    contact = {
                        "name": parts[0],
                        "phone": parts[1],
                        "email": parts[2] if len(parts) > 2 else "",
                        "tags": set(parts[3].split(",")) if len(parts) > 3 and parts[3] else set()
                    }
                    contacts.append(contact)
                    
    except FileNotFoundError:
        print(f"üìÅ No existing contacts file. Starting fresh!")
        
    return contacts
```

#### Saving Contacts

```python
def save_contacts(filename, contacts):
    """
    Save contacts to a text file.
    
    Args:
        filename: Path to save the contacts
        contacts: List of contact dictionaries
    """
    try:
        with open(filename, "w") as file:
            for contact in contacts:
                tags_str = ",".join(contact["tags"]) if contact["tags"] else ""
                line = f"{contact['name']}{SEPARATOR}{contact['phone']}{SEPARATOR}{contact['email']}{SEPARATOR}{tags_str}\n"
                file.write(line)
        print(f"üíæ Saved {len(contacts)} contacts!")
        
    except IOError as e:
        print(f"‚ùå Error saving contacts: {e}")
```

### Step 4: Implement Contact Management (10 min)

#### Adding a Contact

```python
def add_contact(contacts):
    """
    Add a new contact interactively.
    
    Args:
        contacts: Current list of contacts
        
    Returns:
        Updated list with new contact added
    """
    print("\n‚ûï ADD NEW CONTACT")
    print("-" * 30)
    
    # Get required fields
    name = input("Name: ").strip()
    if not name:
        print("‚ùå Name is required!")
        return contacts
        
    phone = input("Phone: ").strip()
    if not phone:
        print("‚ùå Phone is required!")
        return contacts
    
    # Check for duplicate
    if any(c["name"].lower() == name.lower() for c in contacts):
        print(f"‚ùå Contact '{name}' already exists!")
        return contacts
    
    # Get optional fields
    email = input("Email (optional): ").strip()
    tags_input = input("Tags (comma-separated, optional): ").strip()
    tags = set(tag.strip() for tag in tags_input.split(",") if tag.strip())
    
    # Create and add contact
    new_contact = {
        "name": name,
        "phone": phone,
        "email": email,
        "tags": tags
    }
    contacts.append(new_contact)
    print(f"‚úÖ Added contact: {name}")
    
    return contacts
```

#### Searching Contacts

```python
def search_contacts(contacts, query):
    """
    Search contacts by name or phone using list comprehension.
    
    Args:
        contacts: List of contacts to search
        query: Search string
        
    Returns:
        List of matching contacts
    """
    query_lower = query.lower()
    
    # Use list comprehension to filter
    matches = [
        contact for contact in contacts
        if query_lower in contact["name"].lower() 
        or query_lower in contact["phone"]
    ]
    
    return matches
```

#### Deleting a Contact

```python
def delete_contact(contacts, name):
    """
    Delete a contact by name.
    
    Args:
        contacts: Current list of contacts
        name: Name of contact to delete
        
    Returns:
        Updated list with contact removed
    """
    # Find and remove using list comprehension
    original_count = len(contacts)
    contacts = [c for c in contacts if c["name"].lower() != name.lower()]
    
    if len(contacts) < original_count:
        print(f"‚úÖ Deleted contact: {name}")
    else:
        print(f"‚ùå Contact '{name}' not found!")
        
    return contacts
```

### Step 5: Implement Display Functions (5 min)

```python
def display_contact(contact):
    """Display a single contact in a nice format."""
    print(f"  üìá {contact['name']}")
    print(f"     üìû {contact['phone']}")
    if contact['email']:
        print(f"     üìß {contact['email']}")
    if contact['tags']:
        print(f"     üè∑Ô∏è  {', '.join(contact['tags'])}")


def display_all_contacts(contacts):
    """Display all contacts."""
    if not contacts:
        print("üì≠ No contacts found!")
        return
        
    print(f"\nüìã ALL CONTACTS ({len(contacts)})")
    print("=" * 40)
    
    for contact in contacts:
        display_contact(contact)
        print("-" * 40)


def show_menu():
    """Display the main menu."""
    print("\n" + "=" * 40)
    print("üì± CONTACT MANAGER")
    print("=" * 40)
    print("  1. View all contacts")
    print("  2. Add contact")
    print("  3. Search contacts")
    print("  4. Delete contact")
    print("  5. View contacts by tag")
    print("  0. Save and Exit")
    print("=" * 40)
```

### Step 6: Implement Main Loop (5 min)

```python
def main():
    """Main entry point - runs the contact manager."""
    print("\nüöÄ Welcome to Contact Manager!")
    
    # Load existing contacts
    contacts = load_contacts(CONTACTS_FILE)
    print(f"üìÇ Loaded {len(contacts)} contacts\n")
    
    while True:
        show_menu()
        
        try:
            choice = input("Enter choice (0-5): ").strip()
            
            if choice == "1":
                display_all_contacts(contacts)
                
            elif choice == "2":
                contacts = add_contact(contacts)
                
            elif choice == "3":
                query = input("Search for: ").strip()
                if query:
                    results = search_contacts(contacts, query)
                    if results:
                        print(f"\nüîç Found {len(results)} match(es):")
                        for contact in results:
                            display_contact(contact)
                    else:
                        print("‚ùå No matches found!")
                        
            elif choice == "4":
                name = input("Enter name to delete: ").strip()
                if name:
                    contacts = delete_contact(contacts, name)
                    
            elif choice == "5":
                tag = input("Enter tag to filter by: ").strip()
                if tag:
                    # Use list comprehension with set membership
                    tagged = [c for c in contacts if tag in c["tags"]]
                    if tagged:
                        print(f"\nüè∑Ô∏è Contacts with tag '{tag}':")
                        for contact in tagged:
                            display_contact(contact)
                    else:
                        print(f"‚ùå No contacts with tag '{tag}'")
                        
            elif choice == "0":
                save_contacts(CONTACTS_FILE, contacts)
                print("\nüëã Goodbye!")
                break
                
            else:
                print("‚ùå Invalid choice! Please enter 0-5")
                
        except Exception as e:
            print(f"‚ùå An error occurred: {e}")


if __name__ == "__main__":
    main()
```

---

## üéØ Stretch Goals

Once core features work, try adding:

### Level 1 Stretches
- [ ] **Edit Contact** - Modify existing contact details
- [ ] **Sort Contacts** - Sort by name or by most recent

### Level 2 Stretches
- [ ] **Import/Export** - Support multiple file formats
- [ ] **Statistics** - Show contact stats (total, tags count)
- [ ] **Backup** - Create dated backup before overwriting

### Level 3 Stretches (Advanced)
- [ ] **Multiple Files** - Split into modules (operations.py, utils.py)
- [ ] **Validation** - Validate email format, phone format
- [ ] **Groups** - Manage contact groups separately

---

## ‚úÖ Success Criteria

Your project should demonstrate:

| Criteria | Check |
|----------|-------|
| **File I/O** | Reads and writes contacts to text file |
| **Error Handling** | Handles missing file, invalid input gracefully |
| **Functions** | Code organized into clear, single-purpose functions |
| **List Comprehensions** | Used for searching/filtering |
| **Sets** | Used for storing unique tags |
| **Code Quality** | Docstrings, clear names, good structure |
| **User Experience** | Clear menus, helpful messages |

---

## üß™ Testing Your Project

Test these scenarios:

1. **Fresh Start** - Run with no contacts.txt file
2. **Add Contacts** - Add 3-4 contacts with different data
3. **Search** - Find contacts by partial name/phone
4. **Filter by Tag** - View contacts with specific tag
5. **Delete** - Remove a contact
6. **Persistence** - Exit, restart, verify data saved
7. **Error Cases** - Try invalid inputs, empty fields

---

## üìÅ Deliverable

Save your completed project as:
```
src/L2/MP2/contact_manager.py
```

---

## üéì Level 2 Complete!

Congratulations! By completing this project, you have:

- ‚úÖ Mastered advanced data structures (sets, tuples)
- ‚úÖ Written elegant list comprehensions
- ‚úÖ Created well-organized functions
- ‚úÖ Handled errors gracefully
- ‚úÖ Read from and written to text files
- ‚úÖ Built a complete, practical application

You're ready for **Level 3: Novice ‚Üí Learner**! üöÄ

---

## üîó Related Resources

- **Previous**: [Session 8 - Modules Deep Dive](09_S8.md)
- **Level Plan**: [L2 Plan](_Plan.md)
- **Next Level**: Level 3 (Coming Soon!)

---

*Level 2, Mini Project 2 - Contact Manager Application*
